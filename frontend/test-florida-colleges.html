<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Florida Colleges Test - FraternityBase</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        h1 {
            color: #1a202c;
            margin-bottom: 10px;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #17a2b8;
        }
        .college-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .college-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .college-name {
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 8px;
        }
        .college-stats {
            font-size: 14px;
            opacity: 0.9;
        }
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 10px 10px 0;
        }
        button:hover {
            background: #5568d3;
        }
        .console-output {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üó∫Ô∏è Florida Colleges Data Test</h1>
        <p>Test Florida colleges data structure used in the map</p>

        <div class="test-section">
            <h2>üìä Quick Stats</h2>
            <div id="stats" class="info">Loading...</div>
        </div>

        <div class="test-section">
            <h2>üß™ Run Tests</h2>
            <button onclick="testDataStructure()">Test Data Structure</button>
            <button onclick="testFloridaColleges()">Test Florida Colleges</button>
            <button onclick="testProductionAPI()">Test Production API</button>
            <button onclick="clearConsole()">Clear Console</button>
        </div>

        <div class="console-output" id="console"></div>

        <div id="colleges-container"></div>
    </div>

    <script>
        // Simulated Florida colleges data (from statesGeoData.ts)
        const FLORIDA_COLLEGES = [
            { name: "Barry University (FL)", lat: 28.3524, lng: -81.775, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Bethune‚ÄìCookman University (FL)", lat: 26.7796, lng: -81.3553, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "Eckerd College (FL)", lat: 27.9482, lng: -82.2073, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Edward Waters University (FL)", lat: 27.7514, lng: -82.4062, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Embry-Riddle Aeronautical University (FL)", lat: 27.2396, lng: -80.7397, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Flagler College (FL)", lat: 26.788, lng: -80.891, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Florida Agricultural and Mechanical University (FL)", lat: 27.4851, lng: -81.5297, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "Florida Atlantic University (FL)", lat: 27.6793, lng: -82.217, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "Florida Gulf Coast University (FL)", lat: 26.9699, lng: -82.6646, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "Florida Institute of Technology (FL)", lat: 28.2817, lng: -82.3293, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Florida International University (FL)", lat: 27.7778, lng: -82.4671, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "Florida Southern College (FL)", lat: 28.6776, lng: -81.4385, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Florida State University (FL)", lat: 28.7264, lng: -81.3166, fraternities: 30, sororities: 20, totalMembers: 2500, conference: "ACC", division: "D1" },
            { name: "Jacksonville University (FL)", lat: 27.5663, lng: -81.9621, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "Lynn University (FL)", lat: 27.3843, lng: -81.3009, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Nova Southeastern University (FL)", lat: 28.6769, lng: -82.2528, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Palm Beach Atlantic University (FL)", lat: 27.3085, lng: -81.0483, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Rollins College (FL)", lat: 28.3906, lng: -81.2563, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Saint Leo University (FL)", lat: 27.2222, lng: -81.7883, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "Stetson University (FL)", lat: 27.3986, lng: -82.4264, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "University of Central Florida (FL)", lat: 28.5215, lng: -81.39, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "University of Florida (FL)", lat: 27.3952, lng: -82.4832, fraternities: 30, sororities: 20, totalMembers: 2500, conference: "SEC", division: "D1" },
            { name: "University of Miami (FL)", lat: 27.3758, lng: -81.3593, fraternities: 30, sororities: 20, totalMembers: 2500, conference: "ACC", division: "D1" },
            { name: "University of North Florida (FL)", lat: 28.2801, lng: -81.3944, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "University of South Florida (FL)", lat: 27.1927, lng: -81.5959, fraternities: 30, sororities: 20, totalMembers: 2500, division: "D1" },
            { name: "University of Tampa (FL)", lat: 27.0414, lng: -82.4679, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" },
            { name: "University of West Florida (FL)", lat: 27.2391, lng: -80.9206, fraternities: 15, sororities: 10, totalMembers: 1000, division: "D2" }
        ];

        let consoleEl = document.getElementById('console');

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : 'üìç';
            consoleEl.innerHTML += `[${timestamp}] ${prefix} ${message}\n`;
            consoleEl.scrollTop = consoleEl.scrollHeight;
            console.log(message);
        }

        function clearConsole() {
            consoleEl.innerHTML = '';
        }

        function updateStats() {
            const totalColleges = FLORIDA_COLLEGES.length;
            const totalFrats = FLORIDA_COLLEGES.reduce((sum, c) => sum + c.fraternities, 0);
            const totalSororities = FLORIDA_COLLEGES.reduce((sum, c) => sum + c.sororities, 0);
            const totalMembers = FLORIDA_COLLEGES.reduce((sum, c) => sum + c.totalMembers, 0);

            document.getElementById('stats').innerHTML = `
                <strong>‚úÖ DATA LOADED SUCCESSFULLY</strong><br>
                üìä Total Colleges: <strong>${totalColleges}</strong><br>
                üèõÔ∏è Total Fraternities: <strong>${totalFrats}</strong><br>
                üëØ Total Sororities: <strong>${totalSororities}</strong><br>
                üë• Total Members: <strong>${totalMembers.toLocaleString()}</strong>
            `;
        }

        function testDataStructure() {
            clearConsole();
            log('üß™ Testing Florida colleges data structure...', 'info');
            log('==================================================', 'info');

            // Test 1: Count
            const count = FLORIDA_COLLEGES.length;
            log(`Test 1: College Count = ${count}`, count === 27 ? 'success' : 'error');

            // Test 2: Required fields
            let allHaveFields = true;
            FLORIDA_COLLEGES.forEach((college, i) => {
                const hasRequired = college.name && college.lat && college.lng &&
                                  college.fraternities !== undefined &&
                                  college.sororities !== undefined;
                if (!hasRequired) {
                    log(`   ‚ùå College #${i + 1} missing required fields`, 'error');
                    allHaveFields = false;
                }
            });
            log(`Test 2: All colleges have required fields`, allHaveFields ? 'success' : 'error');

            // Test 3: Valid coordinates
            let allValidCoords = true;
            FLORIDA_COLLEGES.forEach((college) => {
                const validLat = college.lat >= 24.5 && college.lat <= 31.0;
                const validLng = college.lng >= -87.7 && college.lng <= -80.0;
                if (!validLat || !validLng) {
                    log(`   ‚ùå ${college.name} has invalid FL coordinates`, 'error');
                    allValidCoords = false;
                }
            });
            log(`Test 3: All coordinates within Florida bounds`, allValidCoords ? 'success' : 'error');

            // Test 4: Show D1 schools
            const d1Schools = FLORIDA_COLLEGES.filter(c => c.division === 'D1');
            log(`Test 4: Found ${d1Schools.length} D1 schools`, 'success');
            d1Schools.forEach(school => {
                const conf = school.conference ? ` (${school.conference})` : '';
                log(`   üèÜ ${school.name}${conf}`, 'info');
            });

            log('==================================================', 'info');
            log('‚úÖ Data structure tests complete!', 'success');
        }

        function testFloridaColleges() {
            clearConsole();
            log('üó∫Ô∏è Testing Florida colleges map data...', 'info');
            log('==================================================', 'info');

            // Simulate what happens when clicking Florida
            const stateAbbr = 'FL';
            log(`State clicked: Florida (${stateAbbr})`, 'info');

            // Filter colleges (this is what the map does)
            const collegesInState = FLORIDA_COLLEGES;
            const totalChapters = collegesInState.reduce((sum, c) => sum + c.fraternities + c.sororities, 0);
            const totalMembers = collegesInState.reduce((sum, c) => sum + c.totalMembers, 0);

            log(`‚úÖ Loaded ${collegesInState.length} colleges for FL`, 'success');
            log(`üìä Total chapters: ${totalChapters}`, 'info');
            log(`üë• Total members: ${totalMembers.toLocaleString()}`, 'info');

            // Display colleges
            const container = document.getElementById('colleges-container');
            container.innerHTML = '<h2>üìö Florida Colleges (27)</h2><div class="college-grid" id="college-grid"></div>';
            const grid = document.getElementById('college-grid');

            collegesInState.forEach((college) => {
                const card = document.createElement('div');
                card.className = 'college-card';
                card.innerHTML = `
                    <div class="college-name">${college.name.replace(' (FL)', '')}</div>
                    <div class="college-stats">
                        ${college.fraternities} Fraternities ‚Ä¢ ${college.sororities} Sororities<br>
                        ${college.totalMembers.toLocaleString()} Members ‚Ä¢ ${college.division}
                        ${college.conference ? `<br>Conference: ${college.conference}` : ''}
                    </div>
                `;
                grid.appendChild(card);
            });

            log('==================================================', 'info');
            log('‚úÖ Sidebar would show with 27 colleges!', 'success');
        }

        async function testProductionAPI() {
            clearConsole();
            log('üåê Testing production API...', 'info');
            log('==================================================', 'info');

            // Test if production site is accessible
            try {
                log('Testing: https://fraternitybase.com', 'info');
                const response = await fetch('https://fraternitybase.com', { mode: 'no-cors' });
                log('‚úÖ Production site is accessible', 'success');
            } catch (error) {
                log(`‚ùå Production site error: ${error.message}`, 'error');
            }

            log('==================================================', 'info');
            log('üí° Open browser console on production and click Florida to see detailed logs', 'info');
            log('Expected console output:', 'info');
            log('   üó∫Ô∏è [MapPage - handleStateClick] State clicked: Florida', 'info');
            log('   ‚úÖ [MapPage - handleStateClick] Found state abbreviation: FL', 'info');
            log('   ‚úÖ [MapPage - handleStateClick] Loaded 27 colleges for FL', 'info');
        }

        // Initialize on load
        window.onload = function() {
            updateStats();
            log('üéØ Florida Colleges Test Page Loaded', 'success');
            log('üìç Click "Test Florida Colleges" to simulate state click', 'info');
        };
    </script>
</body>
</html>
